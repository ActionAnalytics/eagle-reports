[{"$project":{"performedBy":"$performedBy","action":"$action","timestamp~~~day":{"$let":{"vars":{"column":"$timestamp"},"in":{"___date":{"$dateToString":{"format":"%Y-%m-%d","date":"$$column"}}}}}}},{"$match":{"$and":[{"performedBy":{"$ne":"public"}},{"performedBy":{"$ne":null}},{"$or":[{"action":{"$eq":"search"}},{"action":{"$eq":"summary"}},{"action":{"$eq":"get"}}]},{"timestamp~~~day":{"$gte":{"___date":"2019-07-16"},"$lte":{"___date":"2019-07-30"}}}]}},{"$project":{"_id":"$_id","___group":{"performedBy":"$performedBy"}}},{"$group":{"_id":"$___group","count":{"$sum":1}}},{"$sort":{"_id":1}},{"$project":{"_id":false,"performedBy":"$_id.performedBy","count":true}},{"$sort":{"count":-1,"performedBy":1}}]